if (ENABLE_ICON)
	if (NOT DEFINED ICON_PATH)
		set (ICON_PATH "${CMAKE_CURRENT_SOURCE_DIR}/icon/patata.bmp")
	endif()

	# GAME_NAME is Required here
	if (USE_CUSTOM_ICON AND DEFINED GAME_NAME)
		if (MSVC)
			if (${CMAKE_BUILD_TYPE} STREQUAL "Debug" OR ${CMAKE_BUILD_TYPE} STREQUAL "RelWithDebInfo")
				file(COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})

				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/icon.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/${GAME_NAME}.bmp")
			endif()
		else()
			if (DEFINED GAME_NAME)
				file (COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/icon.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${GAME_NAME}.bmp")
			endif()
		endif()
	else ()
		# GAME_NAME is opcional here
		if (NOT "${ICON_PATH}" STREQUAL "${CMAKE_CURRENT_SOURCE_DIR}/icon/patata.bmp")
			message(FATAL_ERROR "Use -DICON_PATH With -DGAME_NAME And -DUSE_CUSTOM_ICON=ON")
		endif()

		if (MSVC)
			file(COPY ${ICON_PATH}
				DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})
		else()
			file(COPY ${ICON_PATH}
				DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
		endif()

		if (DEFINED GAME_NAME AND NOT "${GAME_NAME}" STREQUAL "")
			if (MSVC)
				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/patata.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/${GAME_NAME}.bmp")
			else()
				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/patata.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${GAME_NAME}.bmp")
			endif()
		endif()
	endif ()
endif()
