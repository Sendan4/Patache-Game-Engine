if (ENABLE_ICON)
	if (NOT DEFINED ICON_PATH)
		set (ICON_PATH "${CMAKE_CURRENT_SOURCE_DIR}/icon/patata.bmp")
	endif()

	# GAME_NAME is Required here
	if (USE_CUSTOM_ICON AND NOT "${GAME_NAME}" STREQUAL "")
		if (MSVC)
			if (${CMAKE_BUILD_TYPE} STREQUAL "Debug" OR ${CMAKE_BUILD_TYPE} STREQUAL "RelWithDebInfo")
				file(COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release)

				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release/icon.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release/${GAME_NAME}.bmp")
			else()
				file(COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})

				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/icon.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE}/${GAME_NAME}.bmp")
			endif()
		else()
			if (DEFINED GAME_NAME)
				file (COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

				file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/icon.bmp"
					"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${GAME_NAME}.bmp")
			endif()
		endif()
	else ()
		# GAME_NAME is opcional here
		if (MSVC)
			if (${CMAKE_BUILD_TYPE} STREQUAL "Debug" OR ${CMAKE_BUILD_TYPE} STREQUAL "RelWithDebInfo")
				file(COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release)
			else()
				file(COPY ${ICON_PATH}
					DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})
			endif()

			file(COPY ${ICON_PATH}
				DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
		else()
			file(COPY ${ICON_PATH}
				DESTINATION ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
		endif()

		if (DEFINED GAME_NAME AND NOT "${GAME_NAME}" STREQUAL "")
			file (RENAME "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/patata.bmp"
				"${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${GAME_NAME}.bmp")
		endif()
	endif ()
endif()
